if(window.mitaoApi==undefined){String.prototype.replaceAll=function(i,n,e){if(!RegExp.prototype.isPrototypeOf(i)){return this.replace(new RegExp(i,e?"gi":"g"),n)}else{return this.replace(i,n)}};window.mitaoApi={version:1.1,isIOS:function(){var i=/\((iPhone|iPad|iPod)/i.test(navigator.userAgent)?true:false;return i},isAndroid:function(){return navigator.userAgent.indexOf("Android")!=-1?true:false},isWeChat:function(){return navigator.userAgent.indexOf("MicroMessenger")!=-1?true:false},isFirefox:function(){return navigator.userAgent.indexOf("Firefox")!=-1?true:false},isMitao:function(){return navigator.userAgent.indexOf("mitao")!=-1?true:false},rand:function(i,n){return Math.ceil(random()*number)+i},random:function(){return Math.random()},is_email:function(i){if(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(i)){return true}return false},isUrl:function(i){var n="^[A-Za-z]+://[A-Za-z0-9-_]+\\.[A-Za-z0-9-_%&?/.=]+$";var e=new RegExp(n);if(e.test(i)){return true}else{return false}},readyFunc:undefined,ready:function(){if(mitaoApi.readyFunc!=undefined&&typeof mitaoApi.readyFunc=="function"){try{mitaoApi.readyFunc()}catch(i){console.log(i)}}},callfun:{},invoke:function(i,n,e){try{if(window.mitaoApi.isIOS()){if(!n||n==undefined||typeof n!="object"){var n={}}var t=function(){};if(e&&e!=undefined&&typeof e=="function"){t=e}window.mitaoApi.callfun[i]=e;window.WebViewJavascriptBridge.callHandler(i,n,t)}else{if(e&&e!=undefined&&typeof e=="function"){window.mitaoApi.callfun[i]=e}if(!n||n==undefined||typeof n!="object"){console.log("mitaoApi js call:"+"window.mitao."+i+"()");window.mitao[i]()}else{console.log("mitaoApi js call:"+"window.mitao."+i+"('"+JSON.stringify(n)+"')");window.mitao[i](JSON.stringify(n))}}}catch(i){console.log("mitaoApi js error:",i);alert("发生异常："+i)}},callback:function(i,n){try{if(n){if(mitaoApi.callfun[i]!=undefined){mitaoApi.callfun[i](n)}}else{if(mitaoApi.callfun[i]!=undefined){mitaoApi.callfun[i]()}}}catch(i){console.log(n)}},ready:function(i){try{mitaoApi.readyFunc=i}catch(i){console.log(param)}}}}