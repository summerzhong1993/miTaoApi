if(window.mitaoApi==undefined){window.mitaoApi={version:1.1,DEBUG:false,isIOS:function(){var e=/\((iPhone|iPad|iPod)/i.test(navigator.userAgent)?true:false;return e},isAndroid:function(){return navigator.userAgent.indexOf("Android")!=-1?true:false},isWeChat:function(){return navigator.userAgent.indexOf("MicroMessenger")!=-1?true:false},isFirefox:function(){return navigator.userAgent.indexOf("Firefox")!=-1?true:false},isMitao:function(){return navigator.userAgent.indexOf("mitao")!=-1?true:false},randomInt:function(e,i){return Math.ceil(Math.random()*i)+e},is_email:function(e){if(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)){return true}return false},isUrl:function(e){var i="^[A-Za-z]+://[A-Za-z0-9-_]+\\.[A-Za-z0-9-_%&?/.=]+$";var r=new RegExp(i);if(r.test(e)){return true}else{return false}},setDebug:function(e){this.DEBUG=e?true:false},readyFunc:undefined,ready:function(){if(this.readyFunc!=undefined&&typeof this.readyFunc=="function"){try{this.readyFunc();this.isLoad=true}catch(e){if(this.DEBUG){alert("mitaoApi ready error "+e)}console.error("mitaoApi ready ",e)}}},isLoad:false,callfun:{},bridge:null,invoke:function(i,r,n){var t=this;try{var e=function(){};if(n&&n!=undefined&&typeof n=="function"){e=n}var a=i;switch(i){case"requestApi":a=[i,t.randomInt(1e3,99999)].join("_");r.callbackName=a;break}t.callfun[a]=n;if(t.isIOS()){t.setupWebViewJavascriptBridgeForIos(function(e){t.bridge=e;t.bridge.callHandler(i,JSON.stringify(r),n)})}else{r?window.mitao[i](JSON.stringify(r)):window.mitao[i]()}}catch(e){if(this.DEBUG){alert("mitaoApi invoke error : \n"+e)}console.error("mitaoApi invoke error:",e)}},callback:function(i){var e=i.apiName;var r=this;try{if(i){if(r.callfun[e]!=undefined){r.callfun[e](i)}}else{if(r.callfun[e]!=undefined){r.callfun[e]()}}}catch(e){if(this.DEBUG){alert("mitaoApi callback error \nError: \n"+e+"\nParam: "+JSON.stringify(i,"",2))}console.error("callback error mitaoApi: ",e,i)}},setupWebViewJavascriptBridgeForIos:function(e){if(window.WebViewJavascriptBridge){return e(WebViewJavascriptBridge)}if(window.WVJBCallbacks){return window.WVJBCallbacks.push(e)}window.WVJBCallbacks=[e];var i=document.createElement("iframe");i.style.display="none";i.src="wvjbscheme://__BRIDGE_LOADED__";document.documentElement.appendChild(i);setTimeout(function(){document.documentElement.removeChild(i)},0)},connectWebViewJavascriptBridgeForAndroid:function(e){if(window.WebViewJavascriptBridge){e(WebViewJavascriptBridge)}else{document.addEventListener("WebViewJavascriptBridgeReady",function(){e(WebViewJavascriptBridge)},false)}},loaded:function(e){try{this.readyFunc=e}catch(e){if(this.DEBUG){alert("mitaoApi loaded error "+e)}console.log("mitaoApi loaded",param)}}}}