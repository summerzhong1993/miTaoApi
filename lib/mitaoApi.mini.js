if(window.mitaoApi==undefined){String.prototype.replaceAll=function(e,i,r){if(!RegExp.prototype.isPrototypeOf(e)){return this.replace(new RegExp(e,r?"gi":"g"),i)}else{return this.replace(e,i)}};window.mitaoApi={version:1.1,DEBUG:false,isIOS:function(){var e=/\((iPhone|iPad|iPod)/i.test(navigator.userAgent)?true:false;return e},isAndroid:function(){return navigator.userAgent.indexOf("Android")!=-1?true:false},isWeChat:function(){return navigator.userAgent.indexOf("MicroMessenger")!=-1?true:false},isFirefox:function(){return navigator.userAgent.indexOf("Firefox")!=-1?true:false},isMitao:function(){return navigator.userAgent.indexOf("mitao")!=-1?true:false},rand:function(e,i){return Math.ceil(random()*number)+e},random:function(){return Math.random()},is_email:function(e){if(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)){return true}return false},isUrl:function(e){var i="^[A-Za-z]+://[A-Za-z0-9-_]+\\.[A-Za-z0-9-_%&?/.=]+$";var r=new RegExp(i);if(r.test(e)){return true}else{return false}},setDebug:function(e){this.DEBUG=e?true:false},readyFunc:undefined,ready:function(){if(mitaoApi.readyFunc!=undefined&&typeof mitaoApi.readyFunc=="function"){try{mitaoApi.readyFunc();this.isLoad=true}catch(e){if(this.DEBUG){alert("mitaoApi ready error "+e)}console.error("mitaoApi ready ",e)}}},isLoad:false,callfun:{},bridge:null,invoke:function(i,r,n){var t=this;try{var e=function(){};if(n&&n!=undefined&&typeof n=="function"){e=n}window.mitaoApi.callfun[i]=n;if(window.mitaoApi.isIOS()){t.setupWebViewJavascriptBridgeForIos(function(e){t.bridge=e;t.bridge.callHandler(i,JSON.stringify(r),n)})}else{r?window.mitao[i](JSON.stringify(r)):window.mitao[i]()}}catch(e){if(this.DEBUG){alert("mitaoApi loaded error : \n"+e)}console.error("mitaoApi call error:",e)}},callback:function(i){var e=i.apiName;var r=this;try{if(i){if(mitaoApi.callfun[e]!=undefined){mitaoApi.callfun[e](i)}}else{if(mitaoApi.callfun[e]!=undefined){mitaoApi.callfun[e]()}}}catch(e){if(this.DEBUG){alert("mitaoApi callback error \nError: \n"+e+"\nParam: "+i)}console.error("callback error mitaoApi: ",e,i)}},setupWebViewJavascriptBridgeForIos:function(e){if(window.WebViewJavascriptBridge){return e(WebViewJavascriptBridge)}if(window.WVJBCallbacks){return window.WVJBCallbacks.push(e)}window.WVJBCallbacks=[e];var i=document.createElement("iframe");i.style.display="none";i.src="wvjbscheme://__BRIDGE_LOADED__";document.documentElement.appendChild(i);setTimeout(function(){document.documentElement.removeChild(i)},0)},connectWebViewJavascriptBridgeForAndroid:function(e){if(window.WebViewJavascriptBridge){e(WebViewJavascriptBridge)}else{document.addEventListener("WebViewJavascriptBridgeReady",function(){e(WebViewJavascriptBridge)},false)}},loaded:function(e){try{mitaoApi.readyFunc=e}catch(e){if(this.DEBUG){alert("mitaoApi loaded error "+e)}console.log("mitaoApi loaded",param)}}}}